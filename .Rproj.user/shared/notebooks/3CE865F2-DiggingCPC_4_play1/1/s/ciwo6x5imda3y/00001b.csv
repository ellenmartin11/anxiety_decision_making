"0",""
"0",""
"0","# residuals"
"0",""
"0","choice_risky_gain <- happyData1 %>%"
"0","  filter(Choice == 2 & Trial == ""Gain"") %>%"
"0","  group_by(userKey) %>%"
"0","  summarise(mean_residuals = mean(residuals, na.rm = TRUE),"
"0","              .groups = 'drop') %>%"
"0","  mutate(Choice = ""Risky"","
"0","         Current = ""Gain"")"
"0",""
"0","choice_risky_loss <- happyData1 %>%"
"0","  filter(Choice == 2 & Trial == ""Loss"") %>%"
"0","  group_by(userKey) %>%"
"0","  summarise(mean_residuals = mean(residuals, na.rm = TRUE),"
"0","              .groups = 'drop') %>%"
"0","  mutate(Choice = ""Risky"","
"0","         Current = ""Loss"")"
"0",""
"0",""
"0","  "
"0","# safe choice"
"0","choice_safe_gain <- happyData1 %>%"
"0","  filter(Choice == 1 & Trial == ""Gain"") %>%"
"0","  group_by(userKey) %>%"
"0","  summarise(mean_residuals = mean(residuals, na.rm = TRUE),"
"0","              .groups = 'drop') %>%"
"0","  mutate(Choice = ""Safe"","
"0","                  Current = ""Gain"")"
"0",""
"0","choice_safe_loss <- happyData1 %>%"
"0","  filter(Choice == 1 & Trial == ""Loss"") %>%"
"0","  group_by(userKey) %>%"
"0","  summarise(mean_residuals = mean(residuals, na.rm = TRUE),"
"0","              .groups = 'drop') %>%"
"0","  mutate(Choice = ""Safe"","
"0","                  Current = ""Loss"")"
"0",""
"0","  "
"0",""
"0","choice_combined <- bind_rows(choice_risky_gain, choice_risky_loss,choice_safe_gain,choice_safe_loss)"
"0","summary_choice <- choice_combined %>%"
"0","    group_by(Choice, Current) %>% "
"0","  summarise(mean_resids = mean(mean_residuals,na.rm=TRUE),"
"0","            sem_resids = sd(mean_residuals, na.rm = TRUE) / sqrt(n()))"
"1","[38;5;254m`summarise()` has grouped output by 'Choice'. You can override using the `.groups` argument.[39m
"
"0","ggplot(summary_choice, aes(x = Choice, y = mean_resids,  fill=Current, group=Current)) +"
"0","    geom_bar(stat = ""identity"", position = position_dodge(0.7), width = 0.7, color = ""black"") +"
"0","    geom_errorbar(aes(ymin = mean_resids - sem_resids, ymax = mean_resids + sem_resids),"
"0","                  position = position_dodge(0.7), width = 0.2) + "
"0","    geom_hline(yintercept = 0, linetype = ""dotted"", color = ""black"") +  # Add a dotted line at y=0"
"0","      scale_fill_manual(values = c(""Gain"" = ""#FFD700"", ""Loss"" = ""#FF6347"")) +"
"0",""
"0","    labs("
"0","      title = ""Happiness Residuals (z-scored) Based on Choice"","
"0","      x = ""Choice"","
"0","      y = ""zHappy Resid"""
"0","    ) +"
"0","    theme_minimal() +"
"0","  ylim(-0.3, 0.3) + "
"0","    poster_theme "
